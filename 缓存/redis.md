* [NoSQL](#nosql)
* [Redis的特性](#redis的特性)





# NoSQL

NoSQL:not only sql非关系型数据库

* 支持高并发读写：关系数据库应付不了高并发
* 支持对海量数据的高效率存储和访问
* 支持高可扩展性和高可用性

NoSQL数据库分类：
* 键值对存储：快速查询   存储的数据缺少结构化
* 列存储：查找快 扩展性强 功能局限
* 文档数据库：查询性不是很高
* 图形数据库

特点：易扩展

## Redis概述
支持value的数据类型：

字符串类型 String

列表类型 List：按照插入顺序排序

有序集合类型 sorted-set：与set相比，这其中的每个成员都有一个分数，redis通过这个分数排序，分数可以重复。成员有序，因此，即使访问中部的成员，也是非常高效的。这个类型和set类型都支持不同集合之间的聚合操作。

散列类型 Hash：键值对类型

集合类型 Set：不允许出现相同的元素

应用场景：缓存、任务列表、网站访问统计、数据过期处理、分布式集群架构中session分离

# Redis的特性

## 多数据库
一个redis实例可以包含多个数据库，客户端可以指定连接哪个数据库，一个redis实例最多提供16个数据库。

通过select n指令切换到第n+1个数据库

## 支持事务
事务执行期间，不会对其他提供服务 

multi:该语句后面的都看作事务的操作

exec：相当于提交

discard：回滚

## 持久化
数据从内存中同步到硬盘上的过程。

两种方式：RDB AOF
### RDB方式
默认支持，不需配置。

在指定的时间间隔内，将数据库的快照写入磁盘。

优势：1.redis数据库只有一个文件，方便备份。 

     2.对于灾难恢复而言，能轻松的把文件转移。
     
     3.性能最大化，通过分化子进程（fork）实现。 
     
缺点：1.无法最大限度保证数据的完整性，因为系统一定会在持久化之前出现宕机的情况。

     2.数据集很大时，需要服务器停止
     
RDB流程：这里只讲bgsave，因为这个是RDB主流的持久化方式

1.查看是否有正在持久化的子进程，阻塞父进程。 

2.创建子进程。

3.不再阻塞父进程。

4.子进程创建RDB文件。

5.子进程给父进程发信息表示持久化结束。 

### AOF方式
日志的形式记录服务器的操作，在启动之初会读取日志，并初始化数据

优势：1.这种机制有更高的数据安全性

     2.采用append模式写日志  写入的时候出现宕机不会破坏已经写入的数据  写了一半崩溃，下次启动redis的时候通过redis-check-aof工具解决数据一致性的问题
     3.日志过大，redis自动启动重写机制。redis还会创建一个新的日志，记录重写期间的数据操作，保证重写期间的数据操作不会丢失。
     
     4.日志文件清晰，可以通过这个文件实现数据的重建
     
缺点：1.AOF文件更大
          
     2.根据同步策略的原因，AOF效率低于RDB

redis提供了三种同步策略：
* 每秒同步：异步完成，效率很高，一旦系统宕机，这一秒钟内修改的数据丢失
* 每修改同步：同步持久化 每一次数据的变化会马上记录到磁盘中 效率很低 但是安全
* 不同步

aof流程:
* 1） 所有的写入命令会追加到aof_buf（缓冲区）中。
* 2） AOF缓冲区根据对应的策略向硬盘做同步操作。
* 3） 随着AOF文件越来越大，需要定期对AOF文件进行重写，达到压缩的目的。
* 4） 了解AOF工作流程之后，下面针对每个步骤做详细介绍。

## 数据淘汰策略
可以设置最大使用量，当内存使用量超出的时候会采用淘汰策略。
<div align="center"> <img src="https://github.com/RJianPeng/Technology-Stack/blob/master/%E7%BC%93%E5%AD%98/photo/redis%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.png"/></div><br>


## 事件驱动















